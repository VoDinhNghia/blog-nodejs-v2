<!DOCTYPE html>
<html lang="en">

<head>
    <%- include("../user/header") %>
        <title>Admin home</title>
</head>

<body>
    <%- include("./menu_admin") %>
        <div class="container" style="margin-top:70px">
            <div class="row">
                <div class="col-sm-8">
                    <h5 class="text-center text-danger">Contact from user</h5>
                    <table class="table table-hover">
                        <thead>
                            <tr>
                                <th>#</th>
                                <th>user</th>
                                <th>email</th>
                                <th>content</th>
                                <th>date_contact</th>
                            </tr>
                        </thead>
                        <tbody>
                            <% if(contact.length){ 
                                    for(var i = 0;i < contact.length;i++) { %>
                                <tr>
                                    <td class="text-danger">
                                        <%=i+1 %>.</td>
                                    <td class="text-info">
                                        <%= contact[i].name%>
                                    </td>
                                    <td>
                                        <%= contact[i].email%>
                                    </td>
                                    <td>
                                        <%= contact[i].content%>
                                    </td>
                                    <td>
                                        <%= contact[i].date_contact%>
                                    </td>
                                    <td>
                                        <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#reply_contact<%= contact[i].ID%>">
                                        Reply
                                        </button> <br>

                                        <!-- Modal -->
                                        <div class="modal" id="reply_contact<%= contact[i].ID%>" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
                                            <div class="modal-dialog" role="document">
                                                <div class="modal-content">
                                                    <form action="/reply_contact" method="POST">
                                                        <div class="modal-header">
                                                            <h6 class="modal-title text-info" id="exampleModalLabel">Reply contact from
                                                                <%= contact[i].name%>
                                                            </h6>
                                                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                                            <span aria-hidden="true">&times;</span>
                                                            </button>
                                                        </div>
                                                        <div class="modal-body">
                                                            <h6 class="modal-title text-left text-danger">Content contact:</h6>
                                                            <h6 class="modal-title text-center">
                                                                <%= contact[i].content%>
                                                            </h6><br>
                                                            <h6 class="modal-title text-left text-danger">Reply to
                                                                <%= contact[i].email%>:
                                                            </h6><br>
                                                            <input type="text" name="id_contact" value="<%= contact[i].ID%>" style="display: none;">
                                                            <input type="email" name="email_contact" value="<%= contact[i].email%>" style="display: none;">
                                                            <textarea class="form-control" name="content_reply" id="exampleFormControlTextarea1" rows="5"></textarea>
                                                        </div>
                                                        <div class="modal-footer">
                                                            <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                                                            <button type="submit" class="btn btn-primary">Reply</button>
                                                        </div>
                                                    </form>
                                                </div>
                                            </div>
                                        </div>
                                    </td>
                                </tr>
                                <% }
                                                                        }else{ %>
                                    <tr>
                                        <td colspan="3">Not found.</td>
                                    </tr>
                                    <% } %>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        <br><br>
        <%- include("../user/footer") %>
</body>

</html>